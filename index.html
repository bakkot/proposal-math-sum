<!doctype html>
<head><meta charset="utf-8">
<title>Math.sum</title><script src="ecmarkup.js?cache=jAbUwsIE" defer=""></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.0.1/styles/base16/solarized-light.min.css"><link rel="stylesheet" href="ecmarkup.css"></head><body><div id="shortcuts-help">
<ul>
  <li><span>Toggle shortcuts help</span><code>?</code></li>
  <li><span>Toggle "can call user code" annotations</span><code>u</code></li>

  <li><span>Jump to search box</span><code>/</code></li>
  <li><span>Toggle pinning of the current clause</span><code>p</code></li>
  <li><span>Jump to <i>n</i>th pin</span><code>1-9</code></li>
</ul></div><div id="menu-toggle"><svg xmlns="http://www.w3.org/2000/svg" style="width:100%; height:100%; stroke:currentColor" viewBox="0 0 120 120">
      <title>Menu</title>
      <path stroke-width="10" stroke-linecap="round" d="M30,60 h60  M30,30 m0,5 h60  M30,90 m0,-5 h60"></path>
    </svg></div><div id="menu-spacer" class="menu-spacer"></div><div id="menu"><div id="menu-search"><input type="text" id="menu-search-box" placeholder="Search..."><div id="menu-search-results" class="inactive"></div></div><div id="menu-pins"><div class="menu-pane-header">Pins<button class="unpin-all">clear</button></div><ul id="menu-pins-list"></ul></div><div class="menu-pane-header">Table of Contents</div><div id="menu-toc"><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-proposal-intro" title="Introduction"><span class="secnum">1</span> Introduction</a></li><li><span class="item-toggle-none"></span><a href="#sec-math.sum" title="Math.sum ( ...args )"><span class="secnum">2</span> Math.sum ( ...<var>args</var> )</a></li></ol></div></div><div id="spec-container"><h1 class="version">Stage 1 Draft / December 24, 2023</h1><h1 class="title">Math.sum</h1>

<div id="metadata-block">
  <h1>Contributing to this Proposal</h1>
  <p>You can discuss this proposal <a href="https://github.com/bakkot/proposal-math-sum">on GitHub</a>.</p>
</div>

<emu-clause id="sec-proposal-intro">
  <h1><span class="secnum">1</span> Introduction</h1>
  <p>This proposal adds a method for summing multiple numbers.</p>
</emu-clause>

<emu-clause id="sec-math.sum">
  <h1><span class="secnum">2</span> Math.sum ( ...<var>args</var> )</h1>
  <p>Given zero or more arguments, this function calls <emu-xref aoid="ToNumber"><a href="https://tc39.es/ecma262/#sec-tonumber">ToNumber</a></emu-xref> on each of the arguments and returns their sum.</p>
  <p>It performs the following steps when called:</p>
  <emu-alg><ol><li>Let <var>state</var> be <emu-const>minus-zero</emu-const>.</li><li>Let <var>sum</var> be 0.</li><li>Let <var>count</var> be 0.</li><li>For each element <var>arg</var> of <var>args</var>, do<ol><li>Set <var>count</var> to <var>count</var> + 1.</li><li>If <var>count</var> ≥ 2<sup>53</sup>, throw a <emu-val>RangeError</emu-val> exception.</li><li>NOTE: The above case is not expected to be reached in practice and is included only so that implementations may rely on inputs being "reasonably sized" without violating this specification.</li><li>Let <var>n</var> be ?&nbsp;<emu-xref aoid="ToNumber"><a href="https://tc39.es/ecma262/#sec-tonumber">ToNumber</a></emu-xref>(<var>arg</var>).</li><li>If <var>state</var> is not <emu-const>not-a-number</emu-const>, then<ol><li>If <var>n</var> is <emu-val>NaN</emu-val>, set <var>state</var> to <emu-const>not-a-number</emu-const>.</li><li>If <var>n</var> is <emu-val>+∞</emu-val><sub>𝔽</sub>, then<ol><li>If <var>state</var> is <emu-const>minus-infinity</emu-const>, set <var>state</var> to <emu-const>not-a-number</emu-const>.</li><li>Else, set <var>state</var> to <emu-const>plus-infinity</emu-const>.</li></ol></li><li>If <var>n</var> is <emu-val>-∞</emu-val><sub>𝔽</sub>, then<ol><li>If <var>state</var> is <emu-const>plus-infinity</emu-const>, set <var>state</var> to <emu-const>not-a-number</emu-const>.</li><li>Else, set <var>state</var> to <emu-const>minus-infinity</emu-const>.</li></ol></li><li>If <var>n</var> is not <emu-val>-0</emu-val><sub>𝔽</sub> and <var>state</var> is either <emu-const>minus-zero</emu-const> or <emu-const>finite</emu-const>, then<ol><li>Set <var>state</var> to <emu-const>finite</emu-const>.</li><li>Set <var>sum</var> to <var>sum</var> + <emu-xref aoid="ℝ"><a href="https://tc39.es/ecma262/#ℝ">ℝ</a></emu-xref>(<var>n</var>).</li></ol></li></ol></li></ol></li><li>If <var>state</var> is <emu-const>not-a-number</emu-const>, return <emu-val>NaN</emu-val>.</li><li>If <var>state</var> is <emu-const>plus-infinity</emu-const>, return <emu-val>+∞</emu-val><sub>𝔽</sub>.</li><li>If <var>state</var> is <emu-const>minus-infinity</emu-const>, return <emu-val>-∞</emu-val><sub>𝔽</sub>.</li><li>If <var>state</var> is <emu-const>minus-zero</emu-const>, return <emu-val>-0</emu-val><sub>𝔽</sub>.</li><li>Return <emu-xref aoid="𝔽"><a href="https://tc39.es/ecma262/#𝔽">𝔽</a></emu-xref>(<var>sum</var>).</li><li>NOTE: The value of <var>sum</var> can be computed without arbitrary-precision arithmetic by a variety of algoirthms. One such is the "Expansion Sum" algorithm given in <i>Adaptive Precision Floating-Point Arithmetic and Fast Robust Geometric Predicates</i> by Jonathan Richard Shewchuk.</li></ol></emu-alg>
  <p>The <emu-val>"length"</emu-val> property of this function is <emu-val>2</emu-val><sub>𝔽</sub>.</p>
</emu-clause>
</div></body>