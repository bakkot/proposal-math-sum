<!doctype html>
<head><meta charset="utf-8">
<title>Math.sum</title><script src="ecmarkup.js?cache=jAbUwsIE" defer=""></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.0.1/styles/base16/solarized-light.min.css"><link rel="stylesheet" href="ecmarkup.css"></head><body><div id="shortcuts-help">
<ul>
  <li><span>Toggle shortcuts help</span><code>?</code></li>
  <li><span>Toggle "can call user code" annotations</span><code>u</code></li>

  <li><span>Jump to search box</span><code>/</code></li>
  <li><span>Toggle pinning of the current clause</span><code>p</code></li>
  <li><span>Jump to <i>n</i>th pin</span><code>1-9</code></li>
</ul></div><div id="menu-toggle"><svg xmlns="http://www.w3.org/2000/svg" style="width:100%; height:100%; stroke:currentColor" viewBox="0 0 120 120">
      <title>Menu</title>
      <path stroke-width="10" stroke-linecap="round" d="M30,60 h60  M30,30 m0,5 h60  M30,90 m0,-5 h60"></path>
    </svg></div><div id="menu-spacer" class="menu-spacer"></div><div id="menu"><div id="menu-search"><input type="text" id="menu-search-box" placeholder="Search..."><div id="menu-search-results" class="inactive"></div></div><div id="menu-pins"><div class="menu-pane-header">Pins<button class="unpin-all">clear</button></div><ul id="menu-pins-list"></ul></div><div class="menu-pane-header">Table of Contents</div><div id="menu-toc"><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-proposal-intro" title="Introduction"><span class="secnum">1</span> Introduction</a></li><li><span class="item-toggle-none"></span><a href="#sec-math.sum" title="Math.sum ( ...args )"><span class="secnum">2</span> Math.sum ( ...<var>args</var> )</a></li></ol></div></div><div id="spec-container"><h1 class="version">Stage 0 Draft / November 10, 2023</h1><h1 class="title">Math.sum</h1>

<div id="metadata-block">
  <h1>Contributing to this Proposal</h1>
  <p>You can discuss this proposal <a href="https://github.com/bakkot/proposal-math-sum">on GitHub</a>.</p>
</div>

<emu-clause id="sec-proposal-intro">
  <h1><span class="secnum">1</span> Introduction</h1>
  <p>This proposal adds a method for summing multiple numbers.</p>
</emu-clause>

<emu-clause id="sec-math.sum">
  <h1><span class="secnum">2</span> Math.sum ( ...<var>args</var> )</h1>
  <p>Given zero or more arguments, this function calls <emu-xref aoid="ToNumber"><a href="https://tc39.es/ecma262/#sec-tonumber">ToNumber</a></emu-xref> on each of the arguments and returns their sum with at most constant error from floating-point operations.</p>
  <p>It performs the following steps when called:</p>
  <emu-alg><ol><li>Let <var>coerced</var> be a new empty <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref>.</li><li>For each element <var>arg</var> of <var>args</var>, do<ol><li>Let <var>n</var> be ?&nbsp;<emu-xref aoid="ToNumber"><a href="https://tc39.es/ecma262/#sec-tonumber">ToNumber</a></emu-xref>(<var>arg</var>).</li><li>Append <var>n</var> to <var>coerced</var>.</li></ol></li><li>If <var>coerced</var> is empty, return <emu-val>+0</emu-val><sub>𝔽</sub>.</li><li>If <var>coerced</var> contains <emu-val>NaN</emu-val>, return <emu-val>NaN</emu-val>.</li><li>If <var>coerced</var> contains <emu-val>+∞</emu-val><sub>𝔽</sub>, then<ol><li>If <var>coerced</var> contains <emu-val>-∞</emu-val><sub>𝔽</sub>, return <emu-val>NaN</emu-val>.</li><li>Return <emu-val>+∞</emu-val><sub>𝔽</sub>.</li></ol></li><li>If <var>coerced</var> contains <emu-val>-∞</emu-val><sub>𝔽</sub>, then<ol><li>Return <emu-val>-∞</emu-val><sub>𝔽</sub>.</li></ol></li><li>If every element of <var>coerced</var> is <emu-val>-0</emu-val><sub>𝔽</sub>, return <emu-val>-0</emu-val><sub>𝔽</sub>.</li><li>Return an <emu-xref href="#implementation-approximated"><a href="https://tc39.es/ecma262/#implementation-approximated">implementation-approximated</a></emu-xref> value for the sum of the elements of <var>coerced</var>. Implementations are recommended to use algorithm such as <a href="https://web.archive.org/web/20220804051351/https://www.mat.univie.ac.at/~neum/scan/01.pdf">that of Neumaier</a> to achieve better error than naive floating-point summation.</li></ol></emu-alg>
  <p>The <emu-val>"length"</emu-val> property of this function is <emu-val>2</emu-val><sub>𝔽</sub>.</p>
</emu-clause>
</div></body>